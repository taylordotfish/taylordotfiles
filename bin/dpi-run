#!/bin/sh
set -euf
unset GDK_DPI_SCALE
unset QT_FONT_DPI
old_dpi=$(xrdb -query | grep '^Xft\.dpi:')
printf 'Xft.dpi: %d\n' "${DPI-96}" | xrdb -override -
gtk4gen=~/.config/gtk-4.0/generate.sh
[ -x "$gtk4gen" ] && "$gtk4gen"
{
    sleep 2
    printf '%s\n' "$old_dpi" | xrdb -override -
    [ -x "$gtk4gen" ] && "$gtk4gen"
} &
exec "$@"
