#!/bin/sh
set -eu
image_1=/usr/share/desktop-base/emerald-theme/wallpaper/contents/images/1920x1080.svg
[ -f ~/.config/monitor-order ] && . ~/.config/monitor-order

i=0
while true; do
    i=$((i+1))
    eval "image=\${image_$i-}"
    [ -z "$image" ] && break
    mindex=$(printf '%s' "${monitor_indices-}" | cut -f"$i")
    mindex=${mindex:-$((i-1))}
    eval "mimage_$mindex=\$image"
done

args=
i=0
while true; do
    eval "mimage=\${mimage_$i-}"
    [ -z "$mimage" ] && break
    args="$args \"\$mimage_$i\""
    i=$((i+1))
done

eval "feh --no-fehbg --bg-fill $args"
